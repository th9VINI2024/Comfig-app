<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Config Pro</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#020617">

<style>
:root{
  --bg:#020617;
  --card:#0f172a;
  --accent:#38bdf8;
  --text:#e5e7eb;
}

*{
  box-sizing:border-box;
  font-family:system-ui, Arial;
}

body{
  margin:0;
  background:linear-gradient(180deg,#020617,#020617);
  color:var(--text);
}

header{
  padding:16px;
  font-size:22px;
  font-weight:600;
}

.container{
  padding:16px;
}

.card{
  background:var(--card);
  border-radius:14px;
  padding:16px;
  margin-bottom:16px;
  box-shadow:0 8px 30px rgba(0,0,0,.3);
}

.card b{
  font-size:16px;
  display:block;
  margin-bottom:8px;
  color:var(--accent);
}

.card span{
  line-height:1.6;
  font-size:15px;
}

select{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:none;
  background:#020617;
  color:#fff;
  margin-top:8px;
}

button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  background:var(--accent);
  color:#020617;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
}
</style>
</head>

<body>

<header>Configura√ß√£o ideal</header>

<div class="container">

  <!-- APARELHO DETECTADO -->
  <div class="card">
    <b>üì± Aparelho detectado:</b>
    <span id="deviceInfo">Detectando...</span>
  </div>

  <!-- SELE√á√ÉO MANUAL -->
  <div class="card">
    <b>üì≤ Escolher aparelho manualmente (opcional)</b>

    <select id="manualBrand">
      <option value="">Autom√°tico</option>
      <option value="motorola">Motorola</option>
      <option value="samsung">Samsung</option>
      <option value="xiaomi">Xiaomi</option>
    </select>

    <select id="manualModel">
      <option value="">Selecione o modelo</option>
    </select>
  </div>

  <!-- RESULTADO -->
  <div class="card">
    <b>‚öôÔ∏è Configura√ß√£o</b>
    <span id="result">
      Use a detec√ß√£o autom√°tica ou escolha manualmente.
    </span>
  </div>

  <button onclick="gerarConfiguracao()">Gerar configura√ß√£o</button>

</div>

<script>
/* MODELOS */
const modelos = {
  motorola:{
    "Moto G05":{w:391,h:870},
    "Moto G22":{w:412,h:915}
  },
  samsung:{
    "Galaxy A10":{w:360,h:760},
    "Galaxy A20":{w:412,h:892}
  },
  xiaomi:{
    "Redmi Note 7":{w:393,h:851},
    "Redmi 9":{w:393,h:873},
    "Redmi 13C":{w:393,h:873}
  }
};

const brandSel = document.getElementById("manualBrand");
const modelSel = document.getElementById("manualModel");

brandSel.onchange = ()=>{
  modelSel.innerHTML = `<option value="">Selecione o modelo</option>`;
  if(!brandSel.value) return;

  Object.keys(modelos[brandSel.value]).forEach(m=>{
    const opt=document.createElement("option");
    opt.value=m;
    opt.textContent=m;
    modelSel.appendChild(opt);
  });
};

/* DETEC√á√ÉO AUTOM√ÅTICA */
function detectarAparelho(){
  const ua = navigator.userAgent;
  let marca="Desconhecida";

  if(/Samsung/i.test(ua)) marca="Samsung";
  else if(/Motorola|Moto/i.test(ua)) marca="Motorola";
  else if(/Xiaomi|Redmi|Mi/i.test(ua)) marca="Xiaomi";
  else if(/iPhone/i.test(ua)) marca="iPhone";

  const sistema=/Android/i.test(ua)?"Android":"Outro";
  const w=screen.width;
  const h=screen.height;
  const dpi=Math.round(devicePixelRatio*160);

  document.getElementById("deviceInfo").innerHTML=`
    Marca: ${marca}<br>
    Sistema: ${sistema}<br>
    Tela: ${w} √ó ${h}<br>
    DPI aprox.: ${dpi}
  `;
}

/* DECIS√ÉO FINAL */
function obterTela(){
  if(brandSel.value && modelSel.value){
    const d=modelos[brandSel.value][modelSel.value];
    return {w:d.w,h:d.h,modo:"Manual"};
  }
  return {w:screen.width,h:screen.height,modo:"Autom√°tico"};
}

/* GERAR CONFIG */
function gerarConfiguracao(){
  const tela=obterTela();
  const largura=Math.round(tela.w*0.84);
  const sens=Math.round(tela.w*0.32);

  document.getElementById("result").innerHTML=`
    Modo: <b>${tela.modo}</b><br>
    Menor largura: ${largura}<br>
    Sensibilidade base: ${sens}<br>
    Tela usada: ${tela.w} √ó ${tela.h}
  `;
}

detectarAparelho();

/* SERVICE WORKER */
if("serviceWorker" in navigator){
  navigator.serviceWorker.register("./service.worker.js");
}
</script>

</body>
</html>
